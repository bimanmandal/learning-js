<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=1.0, initial-scale=1.0">
    <title>Hello Rest</title>
    <script>
        function submitClicked() {
            resetResult();
            var word = document.getElementById("word").value;

            const requestUrl = `https://api.dictionaryapi.dev/api/v2/entries/en/${word}`;
            printResult(requestUrl)
            
            let request = new XMLHttpRequest();
            request.open("GET", requestUrl);
            request.send();
            request.onload = () => {
                const responseText = request.responseText;
                const jsonObjects = JSON.parse(responseText);
                // printResult(jsonObjects[0]["word"])
                // printResult("Meaning: " + jsonObjects[0]["meanings"][0]["definitions"][0]["definition"])

                // for (let word of jsonObjects) {
                //     const meaninings = word["meanings"];
                //     for (let meaning of meaninings) {
                //         const definitions = meaning["definitions"];
                //         for(let definition of definitions){
                //             printResult(definition["definition"]);
                //         }
                //     }
                // }

                jsonObjects
                    .flatMap(word => word["meanings"])
                    .flatMap(meanings => meanings["definitions"])
                    .flatMap(definitons => definitons["definition"])
                    .forEach(element => {
                        printResult(element);
                    });
            }

            return false;
        }

        function resetResult() {
            document.getElementById("result").innerHTML = ''
        }

        function printResult(inputHtml) {
            const resultElement = document.getElementById("result");
            const newChild = document.createElement('div');
            newChild.innerHTML = "<h2>" + inputHtml + "</h2>";
            resultElement.appendChild(newChild); 
        }
    </script>
</head>

<body>
    <form onsubmit="return submitClicked()">
        English word<input type="text" id="word">
        <input type="submit" value="GO!!">
    </form>
    <div id="result"></div>
</body>

</html>